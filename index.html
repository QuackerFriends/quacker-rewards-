<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quacker Friends â€” Test</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --brown:#4b2e1e;
    --green:#6DC8BF;
    --cream-rgba: rgba(255,244,236,0.92); /* warm & slightly transparent */
    --card-bg: rgba(255,255,255,0.94);
    --maxW:1100px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:"Poppins",sans-serif;color:var(--brown);overflow:hidden}

  /* BACKGROUNDS */
  #entryScreen, #shopScreen{
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center; flex-direction:column;
    background-position:center; background-size:cover; background-repeat:no-repeat;
  }

  /* ENTRY */
  #entryScreen { background-image: url("https://files.catbox.moe/yat7tm.png"); z-index:50; transition:opacity .9s ease;}
  .enter-button{
    background: #fff;
    color: var(--brown);
    border: none;
    padding: 18px 44px;
    border-radius: 999px;
    font-weight:700;
    font-size:1.6rem;
    cursor:pointer;
    box-shadow: 0 0 20px rgba(255,255,255,0.85);
    transition: transform .22s ease, box-shadow .22s ease;
  }
  .enter-button:hover{ transform: scale(1.06); box-shadow:0 0 30px rgba(255,255,255,0.95); }

  /* SHOP */
  #shopScreen{ display:none; background-image: url("https://files.catbox.moe/8tj3u5.png"); z-index:10; }

  /* Top controls */
  .top-controls{
    position:fixed; top:18px; right:18px; display:flex; gap:10px; align-items:center; z-index:40;
  }
  .connect-btn{
    background:#fff;color:var(--brown); border-radius:28px; padding:10px 16px; border:2px solid rgba(0,0,0,0.06);
    cursor:pointer; font-weight:700;
  }
  .cart-btn{
    display:inline-flex; align-items:center; gap:8px; background:transparent; border:none; cursor:pointer; color:#fff;
    position:relative; font-weight:700;
  }
  .cart-count{
    position:absolute; top:-6px; right:-6px; background:var(--green); color:#fff; font-size:12px; padding:4px 6px; border-radius:999px;
  }

  /* Shop floating button bottom-left */
  .float-shop {
    position:fixed; left:18px; bottom:20px; z-index:40;
    background: #fff; color:var(--brown); border-radius:999px; padding:12px 18px; border:1px solid rgba(0,0,0,0.06);
    cursor:pointer; font-weight:700;
  }

  /* Left drawer */
  .drawer {
    position:fixed; top:0; left:-320px; width:300px; height:100vh; padding:60px 20px; z-index:45;
    background: var(--cream-rgba); backdrop-filter: blur(6px);
    box-shadow: 6px 0 20px rgba(0,0,0,0.15); transition:left .35s ease;
  }
  .drawer.open{ left:0; }
  .drawer h3{ color:var(--brown); margin:0 0 10px; }
  .drawer .cat{ display:block; margin:14px 0; padding:12px; border-radius:10px; cursor:pointer; font-weight:600; color:var(--brown);}
  .drawer .cat:hover{ background: rgba(255,255,255,0.7) }

  /* creamy overlay for product listing */
  .product-overlay {
    position:fixed; inset:0; display:none; z-index:46; justify-content:center; align-items:flex-start; padding:36px;
    background: rgba(255,244,236,0.78); backdrop-filter: blur(3px);
    overflow:auto;
  }
  .product-overlay.show { display:flex; }
  .overlay-inner { width:100%; max-width:var(--maxW); margin-top:48px; }

  .overlay-top {
    display:flex; justify-content:flex-end; align-items:center; gap:12px;
  }
  .overlay-close {
    background:none; border:none; font-size:22px; color:var(--brown); cursor:pointer; font-weight:700;
  }

  /* product grid 2x2 */
  .products-grid {
    display:grid; grid-template-columns: repeat(2, 1fr); gap:20px; margin-top:18px;
  }
  @media (max-width:760px){ .products-grid{ grid-template-columns:repeat(1,1fr);} }

  .card {
    background: var(--card-bg); border-radius:14px; padding:12px; text-align:center; box-shadow: 0 6px 18px rgba(0,0,0,0.08);
  }
  .card img{ width:100%; height:220px; object-fit:cover; border-radius:10px; }
  .card .title{ margin:10px 0 6px; font-weight:700; color:var(--brown); }
  .card .price{ color:var(--brown); font-weight:700; margin-bottom:8px; }
  .card .controls{ display:flex; gap:8px; justify-content:center; align-items:center; margin-top:8px; flex-wrap:wrap; }
  .card select { padding:6px 8px; border-radius:8px; border:1px solid #ddd; background:#fff; color:var(--brown); }
  .card .color-toggle { display:inline-flex; gap:6px; align-items:center; }
  .color-dot{ width:18px; height:18px; border-radius:50%; cursor:pointer; border:1px solid rgba(0,0,0,0.08) }
  .color-dot.white{ background:#fff; }
  .color-dot.black{ background:#000; }

  .size-guide-link { background:none; border:none; color:var(--green); cursor:pointer; font-weight:700; text-decoration:underline; }

  .add-btn { background:var(--brown); color:#fff; border:none; padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:700; }

  /* size guide popup card (small) */
  .size-popup {
    position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); z-index:60; display:none;
    background:var(--card-bg); border-radius:12px; padding:16px; box-shadow:0 10px 30px rgba(0,0,0,0.2); width:320px;
  }
  .size-popup.show { display:block; }
  .size-popup img{ max-width:100%; border-radius:8px; display:block; }
  .size-popup .close-x { position:absolute; top:8px; right:12px; background:none; border:none; font-size:18px; color:var(--brown); cursor:pointer; }

  /* cart modal (right) */
  .cart-modal {
    position:fixed; top:0; right:-360px; width:340px; height:100%; background:var(--card-bg); box-shadow:-6px 0 20px rgba(0,0,0,0.18); z-index:55;
    transition:right .35s ease; padding:18px; overflow:auto;
  }
  .cart-modal.open{ right:0; }
  .cart-item{ display:flex; gap:10px; align-items:center; margin-bottom:12px; }
  .cart-item img{ width:64px; height:64px; object-fit:cover; border-radius:8px; }
  .cart-total{ font-weight:800; margin-top:12px; color:var(--brown) }

  /* footer small icons */
  footer { position:fixed; bottom:12px; left:0; right:0; display:flex; justify-content:center; gap:18px; z-index:40; }
  footer a img{ width:26px; height:26px; filter: invert(1); opacity:0.95; transition: transform .2s; }
  footer a img:hover{ transform:scale(1.15) }
</style>
</head>
<body>

  <!-- ENTRY SCREEN -->
  <section id="entryScreen">
    <button class="enter-button" id="enterBtn">ENTER</button>
  </section>

  <!-- SHOP SCREEN -->
  <section id="shopScreen" aria-hidden="true">
    <!-- top-right controls -->
    <div class="top-controls">
      <button class="connect-btn" id="connectWalletBtn">Connect Wallet</button>
      <button class="cart-btn" id="cartBtn" title="Cart" style="display:none">
        ðŸ›’ <span id="cartCountBadge" class="cart-count">0</span>
      </button>
    </div>

    <!-- floating shop button bottom-left -->
    <button class="float-shop" id="openDrawerBtn">Shop</button>

    <!-- left drawer -->
    <aside class="drawer" id="leftDrawer" aria-hidden="true">
      <h3>Shop</h3>
      <div class="cat" data-cat="tees">Tees</div>
      <div class="cat" data-cat="plushies">Plushies</div>
      <div class="cat" data-cat="keychains">Keychains</div>
    </aside>

    <!-- product overlay (creamy translucent) -->
    <div class="product-overlay" id="productOverlay" aria-hidden="true">
      <div class="overlay-inner">
        <div class="overlay-top">
          <button class="overlay-close" id="overlayCloseBtn" title="Close overlay">âœ•</button>
        </div>

        <div id="productGridWrap">
          <!-- dynamic grid injected here -->
          <div class="products-grid" id="productsGrid"></div>
        </div>
      </div>
    </div>

    <!-- cart modal -->
    <aside class="cart-modal" id="cartModal" aria-hidden="true">
      <h3>Your Cart</h3>
      <div id="cartItems"></div>
      <div class="cart-total" id="cartTotal">Total: $0.00</div>
      <div style="margin-top:12px">
        <button class="add-btn" id="checkoutBtn" style="width:100%;">Checkout</button>
      </div>
    </aside>

  </section>

  <!-- size guide small popup -->
  <div class="size-popup" id="sizeGuidePopup" role="dialog" aria-modal="true" aria-hidden="true">
    <button class="close-x" id="closeSizeGuideBtn">âœ•</button>
    <img src="https://files.catbox.moe/41dvss.png" alt="Size Guide">
  </div>

  <!-- footer small white icons -->
  <footer>
    <a href="#" target="_blank" title="Instagram"><img src="https://cdn-icons-png.flaticon.com/512/174/174855.png" alt="ig"></a>
    <a href="#" target="_blank" title="TikTok"><img src="https://cdn-icons-png.flaticon.com/512/3046/3046121.png" alt="tt"></a>
    <a href="#" target="_blank" title="X"><img src="https://cdn-icons-png.flaticon.com/512/733/733579.png" alt="x"></a>
  </footer>

<script>
/* ---------- state ---------- */
const PRODUCTS = {
  tees: [
    { id:'tee1w', name:'Tee 1', color:'White', white:'https://files.catbox.moe/dw04zw.png', black:'https://files.catbox.moe/d6zm2s.png', price:19.99 },
    { id:'tee2w', name:'Tee 2', color:'White', white:'https://files.catbox.moe/qi081o.png', black:'https://files.catbox.moe/0gn3r2.png', price:19.99 },
    { id:'tee3w', name:'Tee 3', color:'White', white:'https://files.catbox.moe/zqtvvw.png', black:'https://files.catbox.moe/mgu7nu.png', price:19.99 },
    { id:'tee4w', name:'Tee 4', color:'White', white:'https://files.catbox.moe/nbl7st.png', black:'https://files.catbox.moe/5n618u.png', price:19.99 }
  ],
  plushies:[
    { id:'plush1', name:'Duck Plush', img:'https://files.catbox.moe/06xw3d.png', price:24.99 },
    { id:'plush2', name:'Frog Plush', img:'https://files.catbox.moe/zov6wz.png', price:24.99 },
    { id:'plush3', name:'Bunny Plush', img:'https://files.catbox.moe/fe641v.png', price:24.99 }
  ],
  keychains:[
    { id:'key1', name:'Quacker Keychain', img:'https://files.catbox.moe/nlii1p.png', price:9.99 }
  ]
};

let cart = [];

/* ---------- element refs ---------- */
const entryScreen = document.getElementById('entryScreen');
const shopScreen = document.getElementById('shopScreen');
const enterBtn = document.getElementById('enterBtn');
const openDrawerBtn = document.getElementById('openDrawerBtn');
const leftDrawer = document.getElementById('leftDrawer');
const productOverlay = document.getElementById('productOverlay');
const productsGrid = document.getElementById('productsGrid');
const overlayCloseBtn = document.getElementById('overlayCloseBtn');
const cartBtn = document.getElementById('cartBtn');
const cartCountBadge = document.getElementById('cartCountBadge');
const cartModal = document.getElementById('cartModal');
const cartItemsEl = document.getElementById('cartItems');
const cartTotalEl = document.getElementById('cartTotal');
const checkoutBtn = document.getElementById('checkoutBtn');
const sizeGuidePopup = document.getElementById('sizeGuidePopup');
const closeSizeGuideBtn = document.getElementById('closeSizeGuideBtn');

/* ---------- entry -> shop ---------- */
enterBtn.addEventListener('click', () => {
  entryScreen.style.opacity = '0';
  setTimeout(()=> {
    entryScreen.style.display = 'none';
    shopScreen.style.display = 'block';
    // reveal shop screen
    shopScreen.setAttribute('aria-hidden','false');
  }, 700);
});

/* ---------- drawer open/close ---------- */
openDrawerBtn.addEventListener('click', () => {
  leftDrawer.classList.add('open');
});
// close when mouse leaves drawer (hover-out)
leftDrawer.addEventListener('mouseleave', () => {
  leftDrawer.classList.remove('open');
});
// also close when clicking outside
document.addEventListener('click', (e) => {
  if (!leftDrawer.contains(e.target) && e.target !== openDrawerBtn) {
    leftDrawer.classList.remove('open');
  }
});

/* ---------- drawer category clicks ---------- */
leftDrawer.querySelectorAll('.cat').forEach(el=>{
  el.addEventListener('click', () => {
    const cat = el.getAttribute('data-cat');
    showCategory(cat);
    leftDrawer.classList.remove('open');
  });
});

/* ---------- show category overlay ---------- */
function showCategory(cat) {
  productsGrid.innerHTML = ''; // clear
  productOverlay.classList.add('show');
  productOverlay.setAttribute('aria-hidden','false');

  if (cat === 'tees') {
    // 2x2 grid using PRODUCTS.tees
    PRODUCTS.tees.forEach(prod => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <img src="${prod.white}" data-white="${prod.white}" data-black="${prod.black}" alt="${prod.name}">
        <div class="title">${prod.name}</div>
        <div class="price">$${prod.price.toFixed(2)}</div>
        <div class="controls">
          <div class="color-toggle">
            <div class="color-dot white" title="White" data-color="white" style="border:1px solid #ccc"></div>
            <div class="color-dot black" title="Black" data-color="black" style="border:1px solid rgba(255,255,255,0.6)"></div>
          </div>
          <div class="size-select"><select aria-label="size-select"><option value="S">S</option><option value="M">M</option><option value="L">L</option><option value="XL">XL</option></select></div>
        </div>
        <div style="display:flex;gap:10px;justify-content:center;margin-top:10px">
          <button class="size-guide-link" type="button">Size Guide</button>
          <button class="add-btn" type="button">Add to Cart</button>
        </div>
      `;
      // color toggle handler
      const img = card.querySelector('img');
      card.querySelectorAll('.color-dot').forEach(dot => {
        dot.addEventListener('click', ()=> {
          const c = dot.getAttribute('data-color');
          img.src = (c === 'white') ? img.dataset.white : img.dataset.black;
        });
      });
      // size guide
      card.querySelector('.size-guide-link').addEventListener('click', openSizeGuide);
      // add to cart
      card.querySelector('.add-btn').addEventListener('click', ()=> {
        const size = card.querySelector('select').value;
        const color = img.src === img.dataset.black ? 'Black' : 'White';
        addToCart({ id: prod.id + '-' + size + '-' + color, name: prod.name + ' ('+color+')', img: img.src, size:size, price:prod.price });
      });
      productsGrid.appendChild(card);
    });
  } else if (cat === 'plushies' || cat === 'keychains') {
    const list = PRODUCTS[cat];
    list.forEach(prod => {
      const card = document.createElement('div');
      card.className = 'card';
      const imgSrc = prod.img || prod.white || prod.white;
      card.innerHTML = `
        <img src="${imgSrc}" alt="${prod.name}">
        <div class="title">${prod.name}</div>
        <div class="price">$${prod.price.toFixed(2)}</div>
        <div style="display:flex;gap:10px;justify-content:center;margin-top:10px">
          <button class="add-btn">Add to Cart</button>
        </div>`;
      card.querySelector('.add-btn').addEventListener('click', ()=> {
        addToCart({ id: prod.id, name: prod.name, img: imgSrc, price: prod.price });
      });
      productsGrid.appendChild(card);
    });
  }
}

/* overlay close button */
overlayCloseBtn.addEventListener('click', ()=> {
  productOverlay.classList.remove('show'); productOverlay.setAttribute('aria-hidden','true');
});
productOverlay.addEventListener('click', (e)=> {
  if (e.target === productOverlay) { productOverlay.classList.remove('show'); productOverlay.setAttribute('aria-hidden','true'); }
});

/* ---------- size guide popup ---------- */
function openSizeGuide(){
  sizeGuidePopup.classList.add('show');
  sizeGuidePopup.setAttribute('aria-hidden','false');
}
closeSizeGuideBtn.addEventListener('click', ()=> {
  sizeGuidePopup.classList.remove('show');
  sizeGuidePopup.setAttribute('aria-hidden','true');
});
sizeGuidePopup.addEventListener('click', (e)=> { if (e.target === sizeGuidePopup) { closeSizeGuideBtn.click(); } });


/* ---------- cart logic ---------- */
function addToCart(item){
  cart.push(item);
  updateCartUI();
  // show cart button
  cartBtn.style.display = 'inline-flex';
  // small toast-like feedback (simple)
  const prev = document.createElement('div');
  prev.textContent = `Added ${item.name}`;
  prev.style.position='fixed'; prev.style.top='80px'; prev.style.right='20px'; prev.style.background='#222'; prev.style.color='#fff';
  prev.style.padding='8px 12px'; prev.style.borderRadius='8px'; prev.style.zIndex=9999; document.body.appendChild(prev);
  setTimeout(()=> prev.remove(),1500);
}

function updateCartUI(){
  cartCountBadge.textContent = cart.length;
  // fill cart items in modal
  cartItemsEl.innerHTML = '';
  let total = 0;
  cart.forEach((it, idx) => {
    total += Number(it.price || 0);
    const div = document.createElement('div');
    div.className = 'cart-item';
    div.innerHTML = `<img src="${it.img}" alt=""><div style="flex:1"><div style="font-weight:700">${it.name}</div><div style="font-size:13px;color:#666">${it.size? 'Size: '+it.size : ''}</div></div><div><button data-i="${idx}" style="background:none;border:none;color:var(--brown);cursor:pointer">âœ•</button></div>`;
    div.querySelector('button').addEventListener('click', (e)=> {
      const i = Number(e.currentTarget.dataset.i);
      cart.splice(i,1);
      updateCartUI();
    });
    cartItemsEl.appendChild(div);
  });
  cartTotalEl.textContent = 'Total: $' + total.toFixed(2);
  cartCountBadge.textContent = cart.length;
  if(cart.length === 0){
    cartBtn.style.display = 'none';
    cartModal.classList.remove('open');
  } else {
    cartBtn.style.display = 'inline-flex';
  }
}

cartBtn.addEventListener('click', ()=> {
  cartModal.classList.toggle('open');
});

/* checkout (simple front-end) */
checkoutBtn.addEventListener('click', ()=> {
  if(!cart.length){ alert('Cart is empty'); return; }
  const addr = prompt('Enter shipping address:');
  if(!addr) return;
  alert('Checkout simulated â€” thank you!'); cart = []; updateCartUI();
});

/* close cart when clicking outside */
document.addEventListener('click', (e) => {
  if (!cartModal.contains(e.target) && e.target !== cartBtn) {
    cartModal.classList.remove('open');
  }
});

/* prevent overlay/drag scroll issues on small screens */
window.addEventListener('resize', ()=> { /* nothing heavy here; placeholder */ });

/* initial hides */
shopScreen.style.display = 'none';
cartBtn.style.display = 'none';
</script>
</body>
</html>
